### STATSPACK


### Описание
  - Набор утилит мониторинга. Он предназначен для того, чтобы отслеживать нагрузку на базу в реальном времени.
  - Устаревший аналог AWR. 
  - 2 dbms_job
    - Первый вызывает statspack.snap и собирает статистику.
	- Второй statspack.purge(sysdate-7, true). Удаляет старую статистику, которой более 7 дней

### Генерация отчета
````
@?/rdbms/admin/spreport.sql # Общий основной отчет
@?/rdbms/admin/sprepsql.sql # Отчет по конкретному запросу
````

### Самое интересное 
  - В основном отчете есть SQL ordered by CPU. Это SQL которые заняли больше всего времени.
  - Время (в секундах) за выполнение одно SQL указано в CPU per Exec (s)

### Представления 
  - STATS$DATABASE_INSTANCE
  - STATS$LEVEL_DESCRIPTION
  - STATS$SNAPSHOT           # Все снапшоты
  - STATS$DB_CACHE_ADVICE
  - STATS$FILESTATXS
  - STATS$TEMPSTATXS
  - STATS$LATCH
  - STATS$LATCH_CHILDREN
  - STATS$LATCH_PARENT
  - STATS$LATCH_MISSES_SUMMARY
  - STATS$LIBRARYCACHE
  - STATS$BUFFER_POOL_STATISTICS
  - STATS$ROLLSTAT
  - STATS$ROWCACHE_SUMMARY
  - STATS$SGA
  - STATS$SGASTAT
  - STATS$SYSSTAT
  - STATS$SESSTAT
  - STATS$SYSTEM_EVENT
  - STATS$SESSION_EVENT
  - STATS$WAITSTAT
  - STATS$ENQUEUE_STATISTICS
  - STATS$SQL_SUMMARY
    - program_id - Это object_id
    - program_line# - Это строка в коде.
  - STATS$SQLTEXT
  - STATS$SQL_STATISTICS
  - STATS$RESOURCE_LIMIT
  - STATS$DLM_MISC
  - STATS$CR_BLOCK_SERVER
  - STATS$CURRENT_BLOCK_SERVER
  - STATS$INSTANCE_CACHE_TRANSFER
  - STATS$UNDOSTAT
  - STATS$SQL_PLAN_USAGE
  - STATS$SQL_PLAN
  - STATS$SEG_STAT
  - STATS$SEG_STAT_OBJ
  - STATS$PGASTAT
  - STATS$PARAMETER
  - STATS$INSTANCE_RECOVERY
  - STATS$STATSPACK_PARAMETER
  - STATS$SHARED_POOL_ADVICE
  - STATS$SQL_WORKAREA_HISTOGRAM
  - STATS$PGA_TARGET_ADVICE
  - STATS$JAVA_POOL_ADVICE
  - STATS$THREAD
  - STATS$FILE_HISTOGRAM
  - STATS$EVENT_HISTOGRAM
  - STATS$TIME_MODEL_STATNAME
  - STATS$SYS_TIME_MODEL
  - STATS$SESS_TIME_MODEL
  - STATS$STREAMS_CAPTURE
  - STATS$STREAMS_APPLY_SUM
  - STATS$PROPAGATION_SENDER
  - STATS$PROPAGATION_RECEIVER
  - STATS$BUFFERED_QUEUES
  - STATS$BUFFERED_SUBSCRIBERS
  - STATS$RULE_SET
  - STATS$OSSTATNAME
  - STATS$OSSTAT
  - STATS$PROCESS_ROLLUP
  - STATS$PROCESS_MEMORY_ROLLUP
  - STATS$SGA_TARGET_ADVICE
  - STATS$STREAMS_POOL_ADVICE
  - STATS$MUTEX_SLEEP
  - STATS$DYNAMIC_REMASTER_STATS
  - STATS$IOSTAT_FUNCTION_NAME
  - STATS$IOSTAT_FUNCTION
  - STATS$MEMORY_TARGET_ADVICE
  - STATS$MEMORY_DYNAMIC_COMPS
  - STATS$MEMORY_RESIZE_OPS
  - STATS$INTERCONNECT_PINGS
  - STATS$IDLE_EVENT